import{_ as h,x as d,o as g,c as r,b as a,F as k,r as A,a as u,k as _,f as o,g as y,m as b,A as w,B as m,t as P,s as c}from"./index-xhTKwg9a.js";import{P as B}from"./ProductCard-DDGpd92k.js";import"./image-CPrgbr6F.js";const C={class:"admin-container"},L={class:"admin-header"},I={class:"header-actions"},V={key:0,class:"loading-state"},S={key:1,class:"product-grid"},U={class:"admin-actions"},$=["onClick"],x=["onClick"],E={__name:"AdminProductView",setup(D){const n=_([]),i=_(!0);d.getUser()?.userId;const f=async()=>{i.value=!0;try{const e=await u.getProducts();n.value=e.data.data}finally{i.value=!1}},v=async e=>{const s=e.status==="AVAILABLE"?"SOLD_OUT":"AVAILABLE",t=d.getUser();try{await u.adminUpdateProduct(t.userId,{...e,status:s}),e.status=s,c(`狀態已更新為 ${s}`,"success")}catch{c("更新失敗","error")}},p=async e=>{if(!confirm("確定要刪除此商品嗎？此操作無法復原。"))return;const s=d.getUser();try{await u.adminDeleteProduct(s.userId,e),n.value=n.value.filter(t=>t.pid!==e),c("商品已刪除","success")}catch{c("刪除失敗","error")}};return g(f),(e,s)=>(o(),r("div",C,[a("header",L,[s[1]||(s[1]=a("h1",null,"商品管理中心",-1)),a("div",I,[a("button",{onClick:s[0]||(s[0]=t=>e.$router.push("/admin/orders")),class:"sub-nav-btn"},"訂單管理 →")])]),i.value?(o(),r("div",V,[...s[2]||(s[2]=[a("div",{class:"spinner"},null,-1),a("p",null,"載入中...",-1)])])):(o(),r("div",S,[(o(!0),r(k,null,A(n.value,t=>(o(),y(B,{key:t.pid,product:t,"show-status":!1},{footer:b(()=>[a("div",U,[a("button",{onClick:m(l=>v(t),["stop"]),class:w(["action-btn status",t.status])},P(t.status==="AVAILABLE"?"設為售完":"設為上架"),11,$),a("button",{onClick:m(l=>p(t.pid),["stop"]),class:"action-btn delete"},"刪除",8,x)])]),_:2},1032,["product"]))),128))]))]))}},T=h(E,[["__scopeId","data-v-f1b2e5eb"]]);export{T as default};

import{_ as p,o as v,x as d,a as m,c as a,b as e,t as r,F as f,r as g,k as u,f as o,l as y,m as h,A as k}from"./index-D49epYfD.js";import{P as w}from"./ProductRow-C_fRjQWN.js";import"./image-CPrgbr6F.js";const x={class:"history-container"},q={key:0,class:"loading-state"},I={key:1,class:"error"},V={key:2,class:"empty"},b={key:3,class:"order-list"},B={class:"card-header"},M={class:"order-id"},N={class:"time"},z={class:"total-row"},C={class:"card-footer"},F={__name:"HistoryView",setup(H){const c=u([]),n=u(!0),l=u("");return v(async()=>{try{d.profile||await d.init();const i=d.getUser();if(!i||!i.userId){l.value="無法取得使用者資訊，請重新登入",n.value=!1;return}const t=await m.getOrders(i.userId);t.data.status==="success"?c.value=t.data.data:l.value=t.data.message}catch(i){console.error(i),l.value="讀取失敗，請稍後再試"}finally{n.value=!1}}),(i,t)=>(o(),a("div",x,[t[1]||(t[1]=e("h1",null,"我的訂單",-1)),n.value?(o(),a("div",q,[...t[0]||(t[0]=[e("div",{class:"spinner"},null,-1),e("p",null,"載入中...",-1)])])):l.value?(o(),a("div",I,r(l.value),1)):c.value.length===0?(o(),a("div",V,"尚無訂單記錄")):(o(),a("div",b,[(o(!0),a(f,null,g(c.value,(s,_)=>(o(),a("div",{key:_,class:"order-card glass-card"},[e("div",B,[e("span",M,"#"+r(s.order_id),1),e("span",N,r(s.time),1)]),y(w,{image:s.image_url||"https://via.placeholder.com/200?text=No+Image",title:s.item_name,spec:s.spec,price:Math.round(s.total/s.qty),qty:s.qty,"image-size":200},{footer:h(()=>[e("div",z,"小計: $ "+r(s.total),1)]),_:2},1032,["image","title","spec","price","qty"]),e("div",C,[e("span",{class:k(["status-badge",s.order_status==="已完成"?"done":"pending"])},r(s.order_status||"處理中"),3)])]))),128))]))]))}},D=p(F,[["__scopeId","data-v-5a4780b2"]]);export{D as default};

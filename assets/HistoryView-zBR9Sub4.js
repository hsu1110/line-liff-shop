import{a as p}from"./api-lWrPAgcP.js";import{_ as f,o as h,k as d,c as o,a as s,t as a,F as m,r as y,d as _,e as n,f as u,n as g}from"./index-DwIoWXNV.js";const k={class:"history-container"},w={key:0,class:"loading"},x={key:1,class:"error"},V={key:2,class:"empty"},b={key:3,class:"order-list"},q={class:"card-header"},B={class:"order-id"},I={class:"time"},M={key:0,class:"row user-info"},C={class:"value"},F={class:"content"},H={key:0,class:"row"},N={class:"value"},S={class:"row details"},$={class:"price-qty"},z={class:"total"},D={class:"card-footer"},E={__name:"HistoryView",setup(L){const c=_([]),r=_(!0),i=_("");return h(async()=>{try{d.profile||await d.init();const l=d.getUser();if(!l||!l.userId){i.value="無法取得使用者資訊，請重新登入",r.value=!1;return}const t=await p.getOrders(l.userId);t.data.status==="success"?c.value=t.data.data:i.value=t.data.message}catch(l){console.error(l),i.value="讀取失敗，請稍後再試"}finally{r.value=!1}}),(l,t)=>(n(),o("div",k,[t[2]||(t[2]=s("h1",null,"我的訂單",-1)),r.value?(n(),o("div",w,"載入中...")):i.value?(n(),o("div",x,a(i.value),1)):c.value.length===0?(n(),o("div",V,"尚無訂單記錄")):(n(),o("div",b,[(n(!0),o(m,null,y(c.value,(e,v)=>(n(),o("div",{key:v,class:"order-card"},[s("div",q,[s("span",B,"#"+a(e.order_id),1),s("span",I,a(e.time),1)]),e.user_name?(n(),o("div",M,[t[0]||(t[0]=s("span",{class:"label"},"買家:",-1)),s("span",C,a(e.user_name),1)])):u("",!0),s("div",F,[s("h3",null,a(e.item_name),1),e.spec?(n(),o("div",H,[t[1]||(t[1]=s("span",{class:"label"},"規格:",-1)),s("span",N,a(e.spec),1)])):u("",!0),s("div",S,[s("span",$," $ "+a(Math.round(e.total/e.qty))+" x "+a(e.qty),1),s("span",z,"$ "+a(e.total),1)])]),s("div",D,[s("span",{class:g(["status-badge",e.order_status==="已完成"?"done":"pending"])},a(e.order_status||"處理中"),3)])]))),128))]))]))}},j=f(E,[["__scopeId","data-v-4fa4e784"]]);export{j as default};

import{_ as k,q as u,o as O,c as d,b as e,F as p,r as v,a as _,d as h,m as I,e as n,t as i,z as T,s as m}from"./index-GBv_kcdL.js";const w={class:"admin-container"},N={class:"admin-header"},V={class:"header-actions"},q={key:0,class:"loading-state"},x={key:1,class:"order-list"},A={class:"group-header"},B={class:"order-no"},C={class:"user-name"},D={class:"items-list"},E={class:"name"},S={class:"spec"},b={class:"qty"},F={class:"group-footer"},U={class:"status-selector"},$=["value","onChange"],z={__name:"AdminOrderView",setup(G){const c=h([]),l=h(!0);u.getUser()?.userId;const g=async()=>{l.value=!0;const t=u.getIDToken();try{const s=await _.adminGetAllOrders(t);c.value=s.data.data}finally{l.value=!1}},f=I(()=>{const t={};return c.value.forEach(s=>{t[s.orderId]||(t[s.orderId]=[]),t[s.orderId].push(s)}),t}),y=async(t,s)=>{const r=u.getIDToken();try{await _.adminUpdateOrder(r,t,s),c.value.forEach(a=>{a.orderId===t&&(a.status=s)}),m("ç‹€æ…‹å·²æ›´æ–°","success")}catch{m("æ›´æ–°å¤±æ•—","error")}};return O(g),(t,s)=>(n(),d("div",w,[e("header",N,[s[1]||(s[1]=e("h1",null,"è¨‚å–®ç¸½è¦½ä¸­å¿ƒ",-1)),e("div",V,[e("button",{onClick:s[0]||(s[0]=r=>t.$router.push("/admin/products")),class:"sub-nav-btn"},"â† å•†å“ç®¡ç†")])]),l.value?(n(),d("div",q,[...s[2]||(s[2]=[e("div",{class:"spinner"},null,-1)])])):(n(),d("div",x,[(n(!0),d(p,null,v(f.value,(r,a)=>(n(),d("div",{key:a,class:"order-group glass-card"},[e("div",A,[e("span",B,"# "+i(a),1),e("span",C,"ğŸ‘¤ "+i(r[0].userName),1)]),e("div",D,[(n(!0),d(p,null,v(r,o=>(n(),d("div",{key:o.pid+o.spec,class:"item"},[e("span",E,i(o.productName),1),e("span",S,"("+i(o.spec)+")",1),e("span",b,"x"+i(o.qty),1)]))),128))]),e("div",F,[e("div",U,[e("select",{value:r[0].status,onChange:o=>y(a,o.target.value),class:"status-select"},[...s[3]||(s[3]=[T('<option value="æœªä»˜æ¬¾" data-v-5d0d4292>æœªä»˜æ¬¾</option><option value="å·²ä»˜æ¬¾" data-v-5d0d4292>å·²ä»˜æ¬¾</option><option value="å·²ç™¼è²¨" data-v-5d0d4292>å·²ç™¼è²¨</option><option value="å·²å®Œæˆ" data-v-5d0d4292>å·²å®Œæˆ</option><option value="å·²å–æ¶ˆ" data-v-5d0d4292>å·²å–æ¶ˆ</option>',5)])],40,$)])])]))),128))]))]))}},M=k(z,[["__scopeId","data-v-5d0d4292"]]);export{M as default};

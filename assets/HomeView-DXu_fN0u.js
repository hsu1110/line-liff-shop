import{d as m,a as f,_,s as v,o as y,c as a,b as s,u as i,t as l,F as k,r as w,e as S,f as r,n as P,g as T,h as D}from"./index-D0T9d6GQ.js";import{o as b}from"./image-CPrgbr6F.js";const C=m("product",{state:()=>({products:[],lastFetchTime:0,loading:!1,error:null}),getters:{isStale:n=>Date.now()-n.lastFetchTime>300*1e3},actions:{async fetchProducts(n=!1){if(!(!n&&!this.loading&&this.products.length>0&&!this.isStale)){this.loading=!0,this.error=null;try{const e=await f.getProducts();if(e.data.status==="success")this.products=e.data.data,this.lastFetchTime=Date.now();else throw new Error(e.data.message||"å–å¾—å•†å“å¤±æ•—")}catch(e){console.error(e),this.products.length===0&&(this.error=e.message||"ç¶²è·¯é€£ç·šéŒ¯èª¤")}finally{this.loading=!1}}},init(){if(this.products.length>0)this.fetchProducts(!0).catch(()=>{});else return this.fetchProducts()}}}),F={class:"home-container"},L={key:0,class:"loading-state"},V={key:1,class:"error-state glass-card"},z={key:2,class:"empty-state"},B={key:3,class:"product-grid"},O=["onClick"],$={class:"img-wrapper"},x=["src","alt"],A={key:0,class:"sold-out-overlay"},E={class:"price-tag"},I={class:"p-info"},N={class:"card-footer"},H={__name:"HomeView",setup(n){const e=C(),{products:c,loading:R,error:u}=v(e),h=S();y(()=>{e.fetchProducts()});function p(d){h.push({name:"product",params:{id:d}})}return(d,t)=>(r(),a("div",F,[t[6]||(t[6]=s("header",{class:"home-header"},[s("h1",null,"Nanikore.c"),s("p",{class:"subtitle"},"æ—¥æœ¬ä»£è³¼ç²¾é¸å•†åŸ")],-1)),i(e).loading?(r(),a("div",L,[...t[1]||(t[1]=[s("div",{class:"spinner"},null,-1),s("p",{class:"loading-text"},"è¼‰å…¥ä¸­...",-1),s("p",{class:"loading-dots"},"è¼‰å…¥æ—¥æœ¬ç›´é€ç²¾å“",-1)])])):i(u)?(r(),a("div",V,[t[2]||(t[2]=s("div",{class:"icon"},"âš ï¸",-1)),s("p",null,l(i(u)),1),s("button",{onClick:t[0]||(t[0]=o=>d.window.location.reload()),class:"retry-btn"},"é‡æ–°å˜—è©¦")])):i(c).length===0?(r(),a("div",z,[...t[3]||(t[3]=[s("div",{class:"icon"},"ğŸ“¦",-1),s("p",null,"ç›®å‰æ²’æœ‰ä¸Šæ¶å•†å“ï¼Œè«‹ç¨å¾Œå†ä¾†",-1)])])):(r(),a("div",B,[(r(!0),a(k,null,w(i(c),(o,g)=>(r(),a("div",{key:o.pid,class:"product-card glass-card",style:P({animationDelay:`${g*.1}s`}),onClick:U=>p(o.pid)},[s("div",$,[s("img",{src:i(b)(o.image_url,400),alt:o.name,loading:"lazy"},null,8,x),o.status==="SOLD_OUT"?(r(),a("div",A,[...t[4]||(t[4]=[s("span",null,"SOLD OUT",-1)])])):T("",!0),s("div",E,"$ "+l(o.price),1)]),s("div",I,[s("h3",null,l(o.name),1),s("div",N,[s("span",{class:D(["status-tag",o.status])},l(o.status==="AVAILABLE"?"ç¾è²¨":"å·²å”®å®Œ"),3),t[5]||(t[5]=s("div",{class:"go-btn"},"â†’",-1))])])],12,O))),128))]))]))}},q=_(H,[["__scopeId","data-v-efc3e570"]]);export{q as default};

import{_ as g,y as l,o as A,c as n,b as t,F as p,r as y,a as u,l as m,f as o,u as k,t as r,h as L,j as i}from"./index-DF_E-BvD.js";import{o as b}from"./image-CPrgbr6F.js";const I={class:"admin-container"},w={class:"admin-header"},B={class:"header-actions"},P={key:0,class:"loading-state"},V={key:1,class:"product-list"},C={class:"card-main"},$=["src"],E={class:"info"},S={class:"price"},U={class:"card-actions"},D=["onClick"],x=["onClick"],z={__name:"AdminProductView",setup(F){const c=m([]),d=m(!0);l.getUser()?.userId;const v=async()=>{d.value=!0;try{const a=await u.getProducts();c.value=a.data.data}finally{d.value=!1}},h=async a=>{const e=a.status==="AVAILABLE"?"SOLD_OUT":"AVAILABLE",s=l.getUser();try{await u.adminUpdateProduct(s.userId,{...a,status:e}),a.status=e,i(`狀態已更新為 ${e}`,"success")}catch{i("更新失敗","error")}},f=async a=>{if(!confirm("確定要刪除此商品嗎？此操作無法復原。"))return;const e=l.getUser();try{await u.adminDeleteProduct(e.userId,a),c.value=c.value.filter(s=>s.pid!==a),i("商品已刪除","success")}catch{i("刪除失敗","error")}};return A(v),(a,e)=>(o(),n("div",I,[t("header",w,[e[1]||(e[1]=t("h1",null,"商品管理中心",-1)),t("div",B,[t("button",{onClick:e[0]||(e[0]=s=>a.$router.push("/admin/orders")),class:"sub-nav-btn"},"訂單管理 →")])]),d.value?(o(),n("div",P,[...e[2]||(e[2]=[t("div",{class:"spinner"},null,-1)])])):(o(),n("div",V,[(o(!0),n(p,null,y(c.value,s=>(o(),n("div",{key:s.pid,class:"admin-card glass-card"},[t("div",C,[t("img",{src:k(b)(s.image_url,200),class:"thumb"},null,8,$),t("div",E,[t("h3",null,r(s.name),1),t("p",S,"$ "+r(s.price),1),t("div",{class:L(["status-tag",s.status])},r(s.status==="AVAILABLE"?"上架中":"已售完"),3)])]),t("div",U,[t("button",{onClick:_=>h(s),class:"action-btn status"},r(s.status==="AVAILABLE"?"設為售完":"設為上架"),9,D),t("button",{onClick:_=>f(s.pid),class:"action-btn delete"},"刪除",8,x)])]))),128))]))]))}},j=g(z,[["__scopeId","data-v-9865a6c8"]]);export{j as default};

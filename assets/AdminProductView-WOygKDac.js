import{_ as A,q as g,o as p,c as n,b as s,F as b,r as y,a as l,d as _,e as o,f as k,t as i,h as L,s as r}from"./index-D8bUJbgY.js";import{o as I}from"./image-CPrgbr6F.js";const w={class:"admin-container"},B={class:"admin-header"},P={class:"header-actions"},V={key:0,class:"loading-state"},C={key:1,class:"product-list"},$={class:"card-main"},E=["src"],S={class:"info"},D={class:"price"},U={class:"card-actions"},x=["onClick"],z=["onClick"],F={__name:"AdminProductView",setup(O){const c=_([]),d=_(!0),u=g.getUser()?.userId,m=async()=>{d.value=!0;try{const e=await l.getProducts();c.value=e.data.data}finally{d.value=!1}},v=async e=>{const t=e.status==="AVAILABLE"?"SOLD_OUT":"AVAILABLE";try{await l.adminUpdateProduct(u,{...e,status:t}),e.status=t,r(`狀態已更新為 ${t}`,"success")}catch{r("更新失敗","error")}},h=async e=>{if(confirm("確定要刪除此商品嗎？此操作無法復原。"))try{await l.adminDeleteProduct(u,e),c.value=c.value.filter(t=>t.pid!==e),r("商品已刪除","success")}catch{r("刪除失敗","error")}};return p(m),(e,t)=>(o(),n("div",w,[s("header",B,[t[1]||(t[1]=s("h1",null,"商品管理中心",-1)),s("div",P,[s("button",{onClick:t[0]||(t[0]=a=>e.$router.push("/admin/orders")),class:"sub-nav-btn"},"訂單管理 →")])]),d.value?(o(),n("div",V,[...t[2]||(t[2]=[s("div",{class:"spinner"},null,-1)])])):(o(),n("div",C,[(o(!0),n(b,null,y(c.value,a=>(o(),n("div",{key:a.pid,class:"admin-card glass-card"},[s("div",$,[s("img",{src:k(I)(a.image_url,200),class:"thumb"},null,8,E),s("div",S,[s("h3",null,i(a.name),1),s("p",D,"$ "+i(a.price),1),s("div",{class:L(["status-tag",a.status])},i(a.status==="AVAILABLE"?"上架中":"已售完"),3)])]),s("div",U,[s("button",{onClick:f=>v(a),class:"action-btn status"},i(a.status==="AVAILABLE"?"設為售完":"設為上架"),9,x),s("button",{onClick:f=>h(a.pid),class:"action-btn delete"},"刪除",8,z)])]))),128))]))]))}},M=A(F,[["__scopeId","data-v-ae64f0bb"]]);export{M as default};

import{d as p,a as h,_ as m,o as f,c as r,b as s,u as i,t as g,F as v,r as y,e as P,f as a,g as _,n as k}from"./index-IQMME31T.js";import{P as w}from"./ProductCard-C0f5hhen.js";import"./image-CPrgbr6F.js";const b=p("product",{state:()=>({products:[],lastFetchTime:0,loading:!1,error:null}),getters:{isStale:o=>Date.now()-o.lastFetchTime>300*1e3,availableProducts:o=>o.products.filter(t=>t.status==="AVAILABLE"||t.status==="SOLD_OUT")},actions:{async fetchProducts(o=!1){if(!(!o&&!this.loading&&this.products.length>0&&!this.isStale)){this.loading=!0,this.error=null;try{const t=await h.getProducts();if(t.data.status==="success")this.products=t.data.data,this.lastFetchTime=Date.now();else throw new Error(t.data.message||"å–å¾—å•†å“å¤±æ•—")}catch(t){console.error(t),this.products.length===0&&(this.error=t.message||"ç¶²è·¯é€£ç·šéŒ¯èª¤")}finally{this.loading=!1}}},init(){if(this.products.length>0)this.fetchProducts(!0).catch(()=>{});else return this.fetchProducts()}}}),S={class:"home-container"},B={key:0,class:"loading-state"},D={key:1,class:"error-state glass-card"},F={key:2,class:"empty-state"},T={key:3,class:"product-grid"},C={__name:"HomeView",setup(o){const t=b(),d=P();f(()=>{t.fetchProducts()});function c(n){d.push({name:"product",params:{id:n}})}return(n,e)=>(a(),r("div",S,[e[4]||(e[4]=s("header",{class:"home-header"},[s("h1",null,"Nanikore.c"),s("p",{class:"subtitle"},"æ—¥æœ¬ä»£è³¼ç²¾é¸å•†åŸŽ")],-1)),i(t).loading?(a(),r("div",B,[...e[1]||(e[1]=[s("div",{class:"spinner"},null,-1),s("p",{class:"loading-text"},"è¼‰å…¥ä¸­...",-1),s("p",{class:"loading-dots"},"è¼‰å…¥æ—¥æœ¬ç›´é€ç²¾å“",-1)])])):i(t).error?(a(),r("div",D,[e[2]||(e[2]=s("div",{class:"icon"},"âš ï¸",-1)),s("p",null,g(i(t).error),1),s("button",{onClick:e[0]||(e[0]=l=>n.window.location.reload()),class:"retry-btn"},"é‡æ–°å˜—è©¦")])):!i(t).availableProducts||i(t).availableProducts.length===0?(a(),r("div",F,[...e[3]||(e[3]=[s("div",{class:"icon"},"ðŸ“¦",-1),s("p",null,"ç›®å‰æ²’æœ‰ä¸Šæž¶å•†å“ï¼Œè«‹ç¨å¾Œå†ä¾†",-1)])])):(a(),r("div",T,[(a(!0),r(v,null,y(i(t).availableProducts,(l,u)=>(a(),_(w,{key:l.pid,product:l,style:k({animationDelay:`${u*.1}s`}),class:"animate-card",onClick:L=>c(l.pid)},null,8,["product","style","onClick"]))),128))]))]))}},E=m(C,[["__scopeId","data-v-a496c1ad"]]);export{E as default};

import{_ as g,y as l,o as k,c as n,b as t,F as A,r as p,a as u,l as m,f as o,u as y,t as i,h as L,j as r}from"./index-GxlIi5pJ.js";import{o as b}from"./image-CPrgbr6F.js";const I={class:"admin-container"},w={class:"admin-header"},B={class:"header-actions"},P={key:0,class:"loading-state"},V={key:1,class:"product-list"},C={class:"card-main"},T=["src"],$={class:"info"},D={class:"price"},E={class:"card-actions"},S=["onClick"],U=["onClick"],x={__name:"AdminProductView",setup(z){const c=m([]),d=m(!0);l.getUser()?.userId;const v=async()=>{d.value=!0;try{const a=await u.getProducts();c.value=a.data.data}finally{d.value=!1}},h=async a=>{const e=a.status==="AVAILABLE"?"SOLD_OUT":"AVAILABLE",s=l.getIDToken();try{await u.adminUpdateProduct(s,{...a,status:e}),a.status=e,r(`狀態已更新為 ${e}`,"success")}catch{r("更新失敗","error")}},f=async a=>{if(!confirm("確定要刪除此商品嗎？此操作無法復原。"))return;const e=l.getIDToken();try{await u.adminDeleteProduct(e,a),c.value=c.value.filter(s=>s.pid!==a),r("商品已刪除","success")}catch{r("刪除失敗","error")}};return k(v),(a,e)=>(o(),n("div",I,[t("header",w,[e[1]||(e[1]=t("h1",null,"商品管理中心",-1)),t("div",B,[t("button",{onClick:e[0]||(e[0]=s=>a.$router.push("/admin/orders")),class:"sub-nav-btn"},"訂單管理 →")])]),d.value?(o(),n("div",P,[...e[2]||(e[2]=[t("div",{class:"spinner"},null,-1)])])):(o(),n("div",V,[(o(!0),n(A,null,p(c.value,s=>(o(),n("div",{key:s.pid,class:"admin-card glass-card"},[t("div",C,[t("img",{src:y(b)(s.image_url,200),class:"thumb"},null,8,T),t("div",$,[t("h3",null,i(s.name),1),t("p",D,"$ "+i(s.price),1),t("div",{class:L(["status-tag",s.status])},i(s.status==="AVAILABLE"?"上架中":"已售完"),3)])]),t("div",E,[t("button",{onClick:_=>h(s),class:"action-btn status"},i(s.status==="AVAILABLE"?"設為售完":"設為上架"),9,S),t("button",{onClick:_=>f(s.pid),class:"action-btn delete"},"刪除",8,U)])]))),128))]))]))}},j=g(x,[["__scopeId","data-v-d4ed8dde"]]);export{j as default};

import{d as _,a as f,_ as v,s as y,o as k,c as a,b as s,u as i,t as l,F as w,r as S,e as P,f as r,n as T,g as b,h as D}from"./index-wv8Ua5ES.js";import{o as C}from"./image-CPrgbr6F.js";const F=_("product",{state:()=>({products:[],lastFetchTime:0,loading:!1,error:null}),getters:{isStale:n=>Date.now()-n.lastFetchTime>300*1e3},actions:{async fetchProducts(n=!1){if(!(!n&&!this.loading&&this.products.length>0&&!this.isStale)){this.loading=!0,this.error=null;try{const o=await f.getProducts();if(o.data.status==="success")this.products=o.data.data,this.lastFetchTime=Date.now();else throw new Error(o.data.message||"å–å¾—å•†å“å¤±æ•—")}catch(o){console.error(o),this.products.length===0&&(this.error=o.message||"ç¶²è·¯é€£ç·šéŒ¯èª¤")}finally{this.loading=!1}}},init(){if(this.products.length>0)this.fetchProducts(!0).catch(()=>{});else return this.fetchProducts()}}}),O={class:"home-container"},z={key:0,class:"loading-state"},L={key:1,class:"error-state glass-card"},N={key:2,class:"empty-state"},V={key:3,class:"product-grid"},$=["onClick"],B={class:"img-wrapper"},E=["src","alt"],x={key:0,class:"sold-out-overlay"},H={class:"price-tag"},I={class:"p-info"},R={class:"card-footer"},U={__name:"HomeView",setup(n){const o=F(),{products:c,loading:h,error:u}=y(o),m=P();k(()=>{o.fetchProducts()});function p(d){m.push({name:"product",params:{id:d}})}return(d,t)=>(r(),a("div",O,[t[6]||(t[6]=s("header",{class:"home-header"},[s("h1",null,"Nanikore.c"),s("p",{class:"subtitle"},"æ—¥æœ¬ä»£è³¼ç²¾é¸å•†åŸ")],-1)),i(h)?(r(),a("div",z,[...t[1]||(t[1]=[s("div",{class:"spinner"},null,-1),s("p",{class:"loading-dots"},"è¼‰å…¥æ—¥æœ¬ç›´é€ç²¾å“",-1)])])):i(u)?(r(),a("div",L,[t[2]||(t[2]=s("div",{class:"icon"},"âš ï¸",-1)),s("p",null,l(i(u)),1),s("button",{onClick:t[0]||(t[0]=e=>d.window.location.reload()),class:"retry-btn"},"é‡æ–°å˜—è©¦")])):i(c).length===0?(r(),a("div",N,[...t[3]||(t[3]=[s("div",{class:"icon"},"ğŸ“¦",-1),s("p",null,"ç›®å‰æ²’æœ‰ä¸Šæ¶å•†å“ï¼Œè«‹ç¨å¾Œå†ä¾†",-1)])])):(r(),a("div",V,[(r(!0),a(w,null,S(i(c),(e,g)=>(r(),a("div",{key:e.pid,class:"product-card glass-card",style:T({animationDelay:`${g*.1}s`}),onClick:A=>p(e.pid)},[s("div",B,[s("img",{src:i(C)(e.image_url,400),alt:e.name,loading:"lazy"},null,8,E),e.status==="SOLD_OUT"?(r(),a("div",x,[...t[4]||(t[4]=[s("span",null,"SOLD OUT",-1)])])):b("",!0),s("div",H,"$ "+l(e.price),1)]),s("div",I,[s("h3",null,l(e.name),1),s("div",R,[s("span",{class:D(["status-tag",e.status])},l(e.status==="ON_SALE"?"ç¾è²¨":"å·²å”®å®Œ"),3),t[5]||(t[5]=s("div",{class:"go-btn"},"â†’",-1))])])],12,$))),128))]))]))}},q=v(U,[["__scopeId","data-v-e5db4803"]]);export{q as default};

import{_ as k,y as u,o as b,c as n,b as e,F as p,r as v,a as _,l as h,q as w,f as r,t as c,B as O,j as m}from"./index-CRqdp2YD.js";const I={class:"admin-container"},T={class:"admin-header"},B={class:"header-actions"},N={key:0,class:"loading-state"},V={key:1,class:"order-list"},q={class:"group-header"},x={class:"order-no"},A={class:"user-name"},C={class:"items-list"},D={class:"name"},E={class:"spec"},S={class:"qty"},F={class:"group-footer"},U={class:"status-selector"},$=["value","onChange"],j={__name:"AdminOrderView",setup(G){const i=h([]),l=h(!0);u.getUser()?.userId;const f=async()=>{l.value=!0;const a=await u.getIDToken();try{const s=await _.adminGetAllOrders(a);i.value=s.data.data}finally{l.value=!1}},g=w(()=>{const a={};return i.value.forEach(s=>{a[s.orderId]||(a[s.orderId]=[]),a[s.orderId].push(s)}),a}),y=async(a,s)=>{const d=await u.getIDToken();try{await _.adminUpdateOrder(d,a,s),i.value.forEach(t=>{t.orderId===a&&(t.status=s)}),m("ç‹€æ…‹å·²æ›´æ–°","success")}catch{m("æ›´æ–°å¤±æ•—","error")}};return b(f),(a,s)=>(r(),n("div",I,[e("header",T,[s[1]||(s[1]=e("h1",null,"è¨‚å–®ç¸½è¦½ä¸­å¿ƒ",-1)),e("div",B,[e("button",{onClick:s[0]||(s[0]=d=>a.$router.push("/admin/products")),class:"sub-nav-btn"},"â† å•†å“ç®¡ç†")])]),l.value?(r(),n("div",N,[...s[2]||(s[2]=[e("div",{class:"spinner"},null,-1)])])):(r(),n("div",V,[(r(!0),n(p,null,v(g.value,(d,t)=>(r(),n("div",{key:t,class:"order-group glass-card"},[e("div",q,[e("span",x,"# "+c(t),1),e("span",A,"ğŸ‘¤ "+c(d[0].userName),1)]),e("div",C,[(r(!0),n(p,null,v(d,o=>(r(),n("div",{key:o.pid+o.spec,class:"item"},[e("span",D,c(o.productName),1),e("span",E,"("+c(o.spec)+")",1),e("span",S,"x"+c(o.qty),1)]))),128))]),e("div",F,[e("div",U,[e("select",{value:d[0].status,onChange:o=>y(t,o.target.value),class:"status-select"},[...s[3]||(s[3]=[O('<option value="æœªä»˜æ¬¾" data-v-c4a5708b>æœªä»˜æ¬¾</option><option value="å·²ä»˜æ¬¾" data-v-c4a5708b>å·²ä»˜æ¬¾</option><option value="å·²ç™¼è²¨" data-v-c4a5708b>å·²ç™¼è²¨</option><option value="å·²å®Œæˆ" data-v-c4a5708b>å·²å®Œæˆ</option><option value="å·²å–æ¶ˆ" data-v-c4a5708b>å·²å–æ¶ˆ</option>',5)])],40,$)])])]))),128))]))]))}},M=k(j,[["__scopeId","data-v-c4a5708b"]]);export{M as default};
